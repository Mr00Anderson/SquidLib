<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>FOVCache (squidlib-util 3.0.0-SNAPSHOT)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: squidpony.squidgrid, class: FOVCache">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":9,"i2":9,"i3":9,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10,"i30":10,"i31":10,"i32":10,"i33":10,"i34":10,"i35":10,"i36":10,"i37":10,"i38":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FOVCache.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<a id="skip.navbar.top">
<!--   -->
</a>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">squidpony.squidgrid</a></div>
<h1 title="Class FOVCache" class="title">Class FOVCache</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a>
<div class="inheritance"><a href="FOV.html" title="class in squidpony.squidgrid">squidpony.squidgrid.FOV</a>
<div class="inheritance">squidpony.squidgrid.FOVCache</div>
</div>
</div>
<section class="description">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/io/Serializable.html?is-external=true" title="class or interface in java.io" class="externalLink">Serializable</a></code></dd>
</dl>
<hr>
<pre>public class <a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.90">FOVCache</a>
extends <a href="FOV.html" title="class in squidpony.squidgrid">FOV</a></pre>
<div class="block">A combined FOV calculator, partial LOS calculator, FOV/LOS compressor, and tool to store/query/extract compressed
 FOV/LOS data; it is less generally-useful than it sounds, and using <a href="FOV.html" title="class in squidpony.squidgrid"><code>FOV</code></a> is usually easier and faster.
 This class operates on one level map at a time and stores FOV maps for all cells in a memory-efficient way,
 though it is likely to take too long to process large maps to be useful on those unless run before the player gets
 to that map. (Large here means more than 10,000 total cells, or 100 width * 100 height, but this rough upper bound is
 based on the capability of the machine running the calculations, and should be expected to be much lower on, for
 instance, older dual-core phones than newer quad-core desktops). There are a few ways to ensure FOVCache is done
 processing a map by the time a player gets to that map; the recommended approach for games with clearly defined,
 separate levels is to generate the first level as part of game startup, run cacheAll() immediately afterward (this
 will start calculation on a second thread), and when the map needs to be displayed (because gameplay has started and
 any character creation steps are done), to call the caching method's counterpart, awaitCache(), which will cause
 gameplay to be essentially frozen until the cache completes (you could display a loading message before calling it).
 The next part is more interesting; you should generate the second level immediately after the awaiting method
 finishes, before the player has approached the second level, and create another FOVCache object using the second
 level as its map, then call cacheAll() on the second level's FOVCache. This will calculate the cache, as before, on
 another thread, and you should call the appropriate awaiting method when the player is entering the second level
 (descending or ascending a staircase, for example). This time, as long as the player spent more than a few seconds on
 the first level for most maps, the cache should be pre-calculated and awaiting should take no time. When the game is
 closed or the player quits, you should call destroy() on this FOVCache to avoid threads possibly lingering after the
 game should have ended.
 <br>
 The FOV calculation this class performs includes a post-processing stage that guarantees symmetry for both LOS and
 FOV. This works by checking every cell that is within the maximum radius for each non-wall cell, and if any cell A
 can see cell B, but cell B can not yet see A, then B's cached FOV map will be altered so it can see A. The other
 post-processing step provides distant lighting; if lights have been passed to the constructor as a Map of Coord keys
 to Integer values, then the Coords in that Map that are walkable squares will emit light up to a radius equal to
 their value in that Map. Cells with distant lighting will always be in FOV if they could be seen at up to radius
 equal to maxLOSRadius, which defaults to 62 and is calculated for every FOVCache as an LOS cache. Calculating distant
 lighting adds a somewhat substantial amount of time to each caching attempt, estimated at tripling the amount of time
 used in cases where there are very many lights in a large dungeon (in a 100x100 dungeon, with one light per 5x5 area
 when the center of that area is walkable, for example), but the lighting is expected to be much less of a performance
 hindrance on smaller maps (80x40, 60x60, anything smaller, etc.) or when there are simply less lights to process
 (because distant lighting is meant to go beyond nearby cells, it needs to run through essentially all lights for every
 cell it processes, and even though adding the lit area to FOV is very efficient and does not require recalculating
 FOV, having lots of lights means lots of work per cell).
 <br>
 This class extends FOV and can be used as a replacement for FOV in some cases. Generally, FOVCache provides methods
 that allow faster manipulation and checks of certain values (such as a simple case of whether a cell can be seen from
 another cell at a given FOV radius), but will fall back to Shadowcasting FOV (without using the cache) if any calls
 to FOV methods are made that have not had their needed information cached. Uncached calls to FOV will not have some
 of the niceties FOVCache can provide, like distant lights. If different light levels are needed (which Shadowcasting
 does not provide), you can call Graded variants on the FOV methods, which will fall back to a Ripple FOV instead and
 will have values between 0.0 and 1.0 instead of only those two extremes.
 <br>
 Conservation of memory usage is a primary concern for this class; storing a full 2D array for every cell on a map
 that is even moderately large uses outrageous amounts of RAM, and attempting that naive approach on a 256x256 map
 would use more than 4 GB of RAM for purely the data from storing bytes or booleans, not including the JVM's overhead
 of between 12 and 19 bytes for every array. Using smaller maps helps both this class and any other approach (less
 cells to store FOV for), and at least for FOVCache, using smaller maxRadius values can reduce memory usage as well.
 For a normal 100x100 map, storing one byte[][] for every cell, and storing a 2D array of those (which has a minimal
 effect on memory consumption vs. a 1D array in this case), the resulting byte[][][][] will use 112,161,616 bytes of
 RAM, approximately 110 MB; this would still need an additional step of processing when used to limit a requested
 FOV map stored in it to the appropriate vision range. To contrast, the current version of FOVCache on the same size
 of map, caching 12 separate FOV radii, uses approximately 6.2 MB. Tests run on ten 100x100 dungeons ran the gamut
 between 6,049,760 and 6,404,336 bytes (the layout of the dungeon doesn't affect memory usage of the naive case, but
 it does have a small effect on the compressed version). To actually use the compressed maps does take an additional
 processing step, but careful benchmarking indicates running FOV for a roughly 12 radius (Radius.SQUARE kind) area
 takes twice as long as simply extracting a cached FOV map, and the advantage for the cache is greater for larger FOV
 radii (but the cache also uses slightly more memory). This compares against the fastest FOV type, Shadowcasting, but
 to get distance information from an FOV you need to use either the customized FOV algorithm in this class (Slope
 Shadowcasting), or to use the Ripple FOV type. Ripple does respect translucent objects, which neither shadowcasting
 nor this class' slope shadowcasting does, but getting 16 FOV levels from the cache for every walkable cell on a
 100x100 dungeon map takes approximately 19 ms while running Ripple FOV for the same set of cells takes over 700 ms.
 Benchmarks are conducted using JMH, a tool developed by the OpenJDK team, in a Maven module called
 squidlib-performance that is not distributed with SquidLib but is available if you download the SquidLib source code.
 However, because the benchmarks don't take the initial calculations into account, they can be somewhat misleading;
 there's also overhead and complexity involved with the background threads this uses. Newer benchmarks that test some
 more recent additions to FOV, like <a href="FOV.html#reuseFOV(double%5B%5D%5B%5D,double%5B%5D%5B%5D,int,int,double)"><code>FOV.reuseFOV(double[][], double[][], int, int, double)</code></a>, show those methods
 as faster than retrieving a compressed FOV map from FOVCache, largely because they can avoid creating garbage.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Tommy Ettinger</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../squidmath/CoordPacker.html" title="class in squidpony.squidmath"><code>has various utilities for operating on compressed data of this kind.
 Created by Tommy Ettinger on 10/7/2015.</code></a>, 
<a href="../../serialized-form.html#squidpony.squidgrid.FOVCache">Serialized Form</a></dd>
</dl>
</section>
<section class="summary">
<ul class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li class="blockList">
<section class="nestedClassSummary"><a id="nested.class.summary">
<!--   -->
</a>
<h2>Nested Class Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="FOVCache.FOVUnit.html" title="class in squidpony.squidgrid">FOVCache.FOVUnit</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="FOVCache.LOSUnit.html" title="class in squidpony.squidgrid">FOVCache.LOSUnit</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="FOVCache.PerformanceUnit.html" title="class in squidpony.squidgrid">FOVCache.PerformanceUnit</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="FOVCache.QualityUnit.html" title="class in squidpony.squidgrid">FOVCache.QualityUnit</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="FOVCache.RefreshUnit.html" title="class in squidpony.squidgrid">FOVCache.RefreshUnit</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="FOVCache.SymmetryUnit.html" title="class in squidpony.squidgrid">FOVCache.SymmetryUnit</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li class="blockList">
<section class="fieldSummary"><a id="field.summary">
<!--   -->
</a>
<h2>Field Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>protected short[][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ALL_WALLS">ALL_WALLS</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected double[][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#atan2Cache">atan2Cache</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected short[][][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#cache">cache</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#complete">complete</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#decay">decay</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected double[][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#directionAngles">directionAngles</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected short[][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#distanceCache">distanceCache</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="FOV.html" title="class in squidpony.squidgrid">FOV</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#fov">fov</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected double</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#fovPermissiveness">fovPermissiveness</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="FOV.html" title="class in squidpony.squidgrid">FOV</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#gradedFOV">gradedFOV</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#height">height</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#lightBrightnesses">lightBrightnesses</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../squidmath/OrderedMap.html" title="class in squidpony.squidmath">OrderedMap</a>&lt;<a href="../squidmath/Coord.html" title="class in squidpony.squidmath">Coord</a>,&#8203;<a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Integer.html?is-external=true" title="class or interface in java.lang" class="externalLink">Integer</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#lights">lights</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../squidmath/Coord.html" title="class in squidpony.squidmath">Coord</a>[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#lightSources">lightSources</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#limit">limit</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected short[][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#losCache">losCache</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#mapLimit">mapLimit</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#maxLOSRadius">maxLOSRadius</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#maxRadius">maxRadius</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#NUM_THREADS">NUM_THREADS</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#qualityComplete">qualityComplete</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="Radius.html" title="enum in squidpony.squidgrid">Radius</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#radiusKind">radiusKind</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#refreshComplete">refreshComplete</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected double[][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#resMap">resMap</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected short[][][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#tmpCache">tmpCache</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected short[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#wallMap">wallMap</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../squidmath/Coord.html" title="class in squidpony.squidmath">Coord</a>[][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#waves">waves</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#width">width</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="inheritedList">
<h3>Fields inherited from class&nbsp;squidpony.squidgrid.<a href="FOV.html" title="class in squidpony.squidgrid">FOV</a></h3>
<a id="fields.inherited.from.class.squidpony.squidgrid.FOV">
<!--   -->
</a><code><a href="FOV.html#ccw">ccw</a>, <a href="FOV.html#ccw_full">ccw_full</a>, <a href="FOV.html#light">light</a>, <a href="FOV.html#nearLight">nearLight</a>, <a href="FOV.html#RIPPLE">RIPPLE</a>, <a href="FOV.html#RIPPLE_LOOSE">RIPPLE_LOOSE</a>, <a href="FOV.html#RIPPLE_TIGHT">RIPPLE_TIGHT</a>, <a href="FOV.html#RIPPLE_VERY_LOOSE">RIPPLE_VERY_LOOSE</a>, <a href="FOV.html#SHADOW">SHADOW</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
<!--   -->
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(char%5B%5D%5B%5D,int,int,squidpony.squidgrid.Radius,int)">FOVCache</a></span>&#8203;(char[][]&nbsp;map,
int&nbsp;maxRadius,
int&nbsp;maxLOSRadius,
<a href="Radius.html" title="enum in squidpony.squidgrid">Radius</a>&nbsp;radiusKind,
int&nbsp;threadCount)</code></th>
<td class="colLast">
<div class="block">Create an FOVCache for a given map (as a char[][]), caching all FOV radii from 0 up to and including maxRadius,
 using the given Radius enum to determine FOV shape.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(char%5B%5D%5B%5D,int,int,squidpony.squidgrid.Radius,int,java.util.Map)">FOVCache</a></span>&#8203;(char[][]&nbsp;map,
int&nbsp;maxRadius,
int&nbsp;maxLOSRadius,
<a href="Radius.html" title="enum in squidpony.squidgrid">Radius</a>&nbsp;radiusKind,
int&nbsp;threadCount,
<a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="../squidmath/Coord.html" title="class in squidpony.squidmath">Coord</a>,&#8203;<a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Integer.html?is-external=true" title="class or interface in java.lang" class="externalLink">Integer</a>&gt;&nbsp;lights)</code></th>
<td class="colLast">
<div class="block">Create an FOVCache for a given map (as a char[][]), caching all FOV radii from 0 up to and including maxRadius,
 using the given Radius enum to determine FOV shape.</div>
</td>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(char%5B%5D%5B%5D,int,squidpony.squidgrid.Radius)">FOVCache</a></span>&#8203;(char[][]&nbsp;map,
int&nbsp;maxRadius,
<a href="Radius.html" title="enum in squidpony.squidgrid">Radius</a>&nbsp;radiusKind)</code></th>
<td class="colLast">
<div class="block">Create an FOVCache for a given map (as a char[][]), caching all FOV radii from 0 up to and including maxRadius,
 using the given Radius enum to determine FOV shape.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t1" class="tableTab" onclick="show(1);">Static Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#approximateMemoryUsage()">approximateMemoryUsage</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#arrayMemoryUsage(int,long)">arrayMemoryUsage</a></span>&#8203;(int&nbsp;length,
long&nbsp;bytesPerItem)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#arrayMemoryUsage2D(int,int,long)">arrayMemoryUsage2D</a></span>&#8203;(int&nbsp;xSize,
int&nbsp;ySize,
long&nbsp;bytesPerItem)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#arrayMemoryUsageJagged(short%5B%5D%5B%5D)">arrayMemoryUsageJagged</a></span>&#8203;(short[][]&nbsp;arr)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#awaitCache()">awaitCache</a></span>()</code></th>
<td class="colLast">
<div class="block">If FOV calculations from cacheAll() are being done on another thread, calling this method will make
 the current thread wait for the FOV calculations' thread to finish, "freezing" the current thread until it does.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#awaitRefresh(char%5B%5D%5B%5D)">awaitRefresh</a></span>&#8203;(char[][]&nbsp;newMap)</code></th>
<td class="colLast">
<div class="block">If FOV calculations from refreshCache() are being done on another thread, calling this method will make
 the current thread wait for the FOV calculations' thread to finish, "freezing" the current thread until it does.</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#cacheAll()">cacheAll</a></span>()</code></th>
<td class="colLast">
<div class="block">Runs FOV calculations on another thread, without interrupting this one, then performs additional quality tweaks
 and adds any distant lights, if there were any in the constructor.</div>
</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>double[][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#calculateFOV(double%5B%5D%5B%5D,int,int)">calculateFOV</a></span>&#8203;(double[][]&nbsp;resistanceMap,
int&nbsp;startx,
int&nbsp;starty)</code></th>
<td class="colLast">
<div class="block">Calculates the Field Of View for the provided map from the given x, y
 coordinates.</div>
</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>double[][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#calculateFOV(double%5B%5D%5B%5D,int,int,double)">calculateFOV</a></span>&#8203;(double[][]&nbsp;resistanceMap,
int&nbsp;startx,
int&nbsp;starty,
double&nbsp;radius)</code></th>
<td class="colLast">
<div class="block">Calculates the Field Of View for the provided map from the given x, y
 coordinates.</div>
</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code>double[][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#calculateFOV(double%5B%5D%5B%5D,int,int,double,squidpony.squidgrid.Radius)">calculateFOV</a></span>&#8203;(double[][]&nbsp;resistanceMap,
int&nbsp;startX,
int&nbsp;startY,
double&nbsp;radius,
<a href="Radius.html" title="enum in squidpony.squidgrid">Radius</a>&nbsp;radiusTechnique)</code></th>
<td class="colLast">
<div class="block">Calculates the Field Of View for the provided map from the given x, y
 coordinates.</div>
</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code>double[][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#calculateFOV(double%5B%5D%5B%5D,int,int,double,squidpony.squidgrid.Radius,double,double)">calculateFOV</a></span>&#8203;(double[][]&nbsp;resistanceMap,
int&nbsp;startX,
int&nbsp;startY,
double&nbsp;radius,
<a href="Radius.html" title="enum in squidpony.squidgrid">Radius</a>&nbsp;radiusTechnique,
double&nbsp;angle,
double&nbsp;span)</code></th>
<td class="colLast">
<div class="block">Calculates the conical Field Of View for the provided map from the given
 x, y coordinates.</div>
</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code><a href="../squidmath/Coord.html" title="class in squidpony.squidmath">Coord</a>[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#calculateLOS(int,int,int,int)">calculateLOS</a></span>&#8203;(int&nbsp;startX,
int&nbsp;startY,
int&nbsp;endX,
int&nbsp;endY)</code></th>
<td class="colLast">
<div class="block">Calculates an array of Coord positions that can be seen along the line from the given start point and end point.</div>
</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code>short[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#calculatePackedLOS(int,int)">calculatePackedLOS</a></span>&#8203;(int&nbsp;viewerX,
int&nbsp;viewerY)</code></th>
<td class="colLast">
<div class="block">Packs FOV for the given viewer's X and Y as a center, and returns the packed data to be stored.</div>
</td>
</tr>
<tr class="rowColor" id="i13">
<td class="colFirst"><code>short[][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#calculatePackedSlopeShadowFOV(int,int)">calculatePackedSlopeShadowFOV</a></span>&#8203;(int&nbsp;viewerX,
int&nbsp;viewerY)</code></th>
<td class="colLast">
<div class="block">Packs FOV for the given viewer's X and Y as a center, and returns the packed data to be stored.</div>
</td>
</tr>
<tr class="altColor" id="i14">
<td class="colFirst"><code>short[][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#calculatePackedWaveFOV(int,int)">calculatePackedWaveFOV</a></span>&#8203;(int&nbsp;viewerX,
int&nbsp;viewerY)</code></th>
<td class="colLast">
<div class="block">Packs FOV for the given viewer's X and Y as a center, and returns the packed data to be stored.</div>
</td>
</tr>
<tr class="rowColor" id="i15">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#destroy()">destroy</a></span>()</code></th>
<td class="colLast">
<div class="block">Shuts down any threads that may prevent the game from closing properly.</div>
</td>
</tr>
<tr class="altColor" id="i16">
<td class="colFirst"><code>short[][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCacheEntry(int,int)">getCacheEntry</a></span>&#8203;(int&nbsp;x,
int&nbsp;y)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i17">
<td class="colFirst"><code>short[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCacheEntry(int,int,int)">getCacheEntry</a></span>&#8203;(int&nbsp;x,
int&nbsp;y,
int&nbsp;radius)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i18">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getHeight()">getHeight</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i19">
<td class="colFirst"><code>short[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLOSEntry(int,int)">getLOSEntry</a></span>&#8203;(int&nbsp;x,
int&nbsp;y)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i20">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMaxRadius()">getMaxRadius</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i21">
<td class="colFirst"><code><a href="Radius.html" title="enum in squidpony.squidgrid">Radius</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRadiusKind()">getRadiusKind</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i22">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getWidth()">getWidth</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i23">
<td class="colFirst"><code>short[][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#improveQuality(int,int)">improveQuality</a></span>&#8203;(int&nbsp;viewerX,
int&nbsp;viewerY)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i24">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isCellVisible(int,int,int,int,int)">isCellVisible</a></span>&#8203;(int&nbsp;visionRange,
int&nbsp;viewerX,
int&nbsp;viewerY,
int&nbsp;targetX,
int&nbsp;targetY)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i25">
<td class="colFirst"><code>double[][][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#pathFOV(java.util.List,int)">pathFOV</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="../squidmath/Coord.html" title="class in squidpony.squidmath">Coord</a>&gt;&nbsp;path,
int&nbsp;fovRange)</code></th>
<td class="colLast">
<div class="block">Given a path as a List of Coords (such as one produced by DijkstraMap.getPath()), this method will look up the
 FOV for the given fovRange at each Coord, and returns an array of full FOV maps where each map is the union
 of the FOV centered on a Coord in path with all FOVs centered on previous Coords in path.</div>
</td>
</tr>
<tr class="altColor" id="i26">
<td class="colFirst"><code>short[][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#pathFOVPacked(java.util.List,int)">pathFOVPacked</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="../squidmath/Coord.html" title="class in squidpony.squidmath">Coord</a>&gt;&nbsp;path,
int&nbsp;fovRange)</code></th>
<td class="colLast">
<div class="block">Given a path as a List of Coords (such as one produced by DijkstraMap.getPath()), this method will look up the
 FOV for the given fovRange at each Coord, and returns an array of packed FOV maps where each map is the union
 of the FOV centered on a Coord in path with all FOVs centered on previous Coords in path.</div>
</td>
</tr>
<tr class="rowColor" id="i27">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#queryCache(int,int,int,int,int)">queryCache</a></span>&#8203;(int&nbsp;visionRange,
int&nbsp;viewerX,
int&nbsp;viewerY,
int&nbsp;targetX,
int&nbsp;targetY)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i28">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#queryLOS(int,int,int,int)">queryLOS</a></span>&#8203;(int&nbsp;viewerX,
int&nbsp;viewerY,
int&nbsp;targetX,
int&nbsp;targetY)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i29">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#refreshCache(char%5B%5D%5B%5D)">refreshCache</a></span>&#8203;(char[][]&nbsp;newMap)</code></th>
<td class="colLast">
<div class="block">Runs FOV calculations for any cells that were changed as a result of newMap being different from the map passed
 to the FOVCache constructor.</div>
</td>
</tr>
<tr class="altColor" id="i30">
<td class="colFirst"><code>short[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removeWalls(short%5B%5D)">removeWalls</a></span>&#8203;(short[]&nbsp;packed)</code></th>
<td class="colLast">
<div class="block">When you have some packed on/off data and want to make sure it does not include walls, you can use this.</div>
</td>
</tr>
<tr class="rowColor" id="i31">
<td class="colFirst"><code>byte[][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#slopeShadowFOV(int,int)">slopeShadowFOV</a></span>&#8203;(int&nbsp;viewerX,
int&nbsp;viewerY)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i32">
<td class="colFirst"><code><a href="../squidmath/Coord.html" title="class in squidpony.squidmath">Coord</a>[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#sortedLOS(int,int,int,int)">sortedLOS</a></span>&#8203;(int&nbsp;startX,
int&nbsp;startY,
int&nbsp;endX,
int&nbsp;endY)</code></th>
<td class="colLast">
<div class="block">Calculates an array of Coord positions that can be seen along the line from the given start point and end point.</div>
</td>
</tr>
<tr class="rowColor" id="i33">
<td class="colFirst"><code>protected long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#storeCellFOV(int)">storeCellFOV</a></span>&#8203;(int&nbsp;index)</code></th>
<td class="colLast">
<div class="block">Packs FOV for a point as a center, and returns it to be stored.</div>
</td>
</tr>
<tr class="altColor" id="i34">
<td class="colFirst"><code>protected long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#storeCellLOS(int)">storeCellLOS</a></span>&#8203;(int&nbsp;index)</code></th>
<td class="colLast">
<div class="block">Packs FOV for a point as a center, and returns it to be stored.</div>
</td>
</tr>
<tr class="rowColor" id="i35">
<td class="colFirst"><code>protected long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#storeCellSymmetry(int)">storeCellSymmetry</a></span>&#8203;(int&nbsp;index)</code></th>
<td class="colLast">
<div class="block">Uses previously cached FOV and makes it symmetrical.</div>
</td>
</tr>
<tr class="altColor" id="i36">
<td class="colFirst"><code>double[][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#teamFOV(java.util.Map)">teamFOV</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="../squidmath/Coord.html" title="class in squidpony.squidmath">Coord</a>,&#8203;<a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Integer.html?is-external=true" title="class or interface in java.lang" class="externalLink">Integer</a>&gt;&nbsp;team)</code></th>
<td class="colLast">
<div class="block">In games that have multiple characters who should share one FOV map, this method should provide optimal
 performance when collecting several cached FOV maps into one full map.</div>
</td>
</tr>
<tr class="rowColor" id="i37">
<td class="colFirst"><code>short[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#teamFOVPacked(java.util.Map)">teamFOVPacked</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="../squidmath/Coord.html" title="class in squidpony.squidmath">Coord</a>,&#8203;<a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Integer.html?is-external=true" title="class or interface in java.lang" class="externalLink">Integer</a>&gt;&nbsp;team)</code></th>
<td class="colLast">
<div class="block">In games that have multiple characters who should share one FOV map, this method should provide optimal
 performance when collecting several cached FOV maps into one packed map.</div>
</td>
</tr>
<tr class="altColor" id="i38">
<td class="colFirst"><code>byte[][]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#waveFOV(int,int)">waveFOV</a></span>&#8203;(int&nbsp;viewerX,
int&nbsp;viewerY)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;squidpony.squidgrid.<a href="FOV.html" title="class in squidpony.squidgrid">FOV</a></h3>
<a id="methods.inherited.from.class.squidpony.squidgrid.FOV">
<!--   -->
</a><code><a href="FOV.html#addFOVs(double%5B%5D%5B%5D...)">addFOVs</a>, <a href="FOV.html#addFOVs(java.lang.Iterable)">addFOVs</a>, <a href="FOV.html#addFOVsInto(double%5B%5D%5B%5D,double%5B%5D%5B%5D)">addFOVsInto</a>, <a href="FOV.html#addFOVsInto(double%5B%5D%5B%5D,double%5B%5D%5B%5D...)">addFOVsInto</a>, <a href="FOV.html#bouncingLine(double%5B%5D%5B%5D,double%5B%5D%5B%5D,int,int,double,double)">bouncingLine</a>, <a href="FOV.html#calculateFOV(double%5B%5D%5B%5D,double%5B%5D%5B%5D,int,int)">calculateFOV</a>, <a href="FOV.html#calculateLOSMap(double%5B%5D%5B%5D,int,int)">calculateLOSMap</a>, <a href="FOV.html#mixVisibleFOVs(double%5B%5D%5B%5D,double%5B%5D%5B%5D...)">mixVisibleFOVs</a>, <a href="FOV.html#mixVisibleFOVs(double%5B%5D%5B%5D,java.lang.Iterable)">mixVisibleFOVs</a>, <a href="FOV.html#mixVisibleFOVsInto(double%5B%5D%5B%5D,double%5B%5D%5B%5D,double%5B%5D%5B%5D...)">mixVisibleFOVsInto</a>, <a href="FOV.html#reuseFOV(double%5B%5D%5B%5D,double%5B%5D%5B%5D,int,int,double)">reuseFOV</a>, <a href="FOV.html#reuseFOV(double%5B%5D%5B%5D,double%5B%5D%5B%5D,int,int,double,squidpony.squidgrid.Radius)">reuseFOV</a>, <a href="FOV.html#reuseFOV(double%5B%5D%5B%5D,double%5B%5D%5B%5D,int,int,double,squidpony.squidgrid.Radius,double,double)">reuseFOV</a>, <a href="FOV.html#reuseFOV(double%5B%5D%5B%5D,double%5B%5D%5B%5D,int,int,double,squidpony.squidgrid.Radius,double,double,double,double,double,double)">reuseFOV</a>, <a href="FOV.html#reuseFOVSymmetrical(double%5B%5D%5B%5D,double%5B%5D%5B%5D,int,int,double,squidpony.squidgrid.Radius)">reuseFOVSymmetrical</a>, <a href="FOV.html#reuseLOS(double%5B%5D%5B%5D,double%5B%5D%5B%5D,int,int)">reuseLOS</a>, <a href="FOV.html#reuseLOS(double%5B%5D%5B%5D,double%5B%5D%5B%5D,int,int,int,int,int,int)">reuseLOS</a></code></div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<li class="blockList">
<section class="fieldDetails"><a id="field.detail">
<!--   -->
</a>
<h2>Field Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="maxRadius">maxRadius</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.93">maxRadius</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="maxLOSRadius">maxLOSRadius</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.93">maxLOSRadius</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="width">width</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.94">width</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="height">height</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.95">height</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="mapLimit">mapLimit</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.96">mapLimit</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="limit">limit</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.97">limit</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="resMap">resMap</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">double[][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.98">resMap</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="radiusKind">radiusKind</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType"><a href="Radius.html" title="enum in squidpony.squidgrid">Radius</a></span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.99">radiusKind</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="cache">cache</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">short[][][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.100">cache</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="tmpCache">tmpCache</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">short[][][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.101">tmpCache</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="losCache">losCache</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">short[][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.102">losCache</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="complete">complete</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.103">complete</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="qualityComplete">qualityComplete</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.103">qualityComplete</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="refreshComplete">refreshComplete</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.103">refreshComplete</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="fov">fov</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType"><a href="FOV.html" title="class in squidpony.squidgrid">FOV</a></span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.104">fov</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="gradedFOV">gradedFOV</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType"><a href="FOV.html" title="class in squidpony.squidgrid">FOV</a></span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.104">gradedFOV</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="ALL_WALLS">ALL_WALLS</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">short[][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.105">ALL_WALLS</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="wallMap">wallMap</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">short[]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.106">wallMap</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="atan2Cache">atan2Cache</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">double[][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.107">atan2Cache</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="directionAngles">directionAngles</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">double[][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.107">directionAngles</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="distanceCache">distanceCache</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">short[][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.108">distanceCache</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="waves">waves</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType"><a href="../squidmath/Coord.html" title="class in squidpony.squidmath">Coord</a>[][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.109">waves</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="NUM_THREADS">NUM_THREADS</a></h3>
<div class="memberSignature"><span class="modifiers">protected final</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.110">NUM_THREADS</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="fovPermissiveness">fovPermissiveness</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">double</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.112">fovPermissiveness</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="lights">lights</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType"><a href="../squidmath/OrderedMap.html" title="class in squidpony.squidmath">OrderedMap</a>&lt;<a href="../squidmath/Coord.html" title="class in squidpony.squidmath">Coord</a>,&#8203;<a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Integer.html?is-external=true" title="class or interface in java.lang" class="externalLink">Integer</a>&gt;</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.113">lights</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="lightSources">lightSources</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType"><a href="../squidmath/Coord.html" title="class in squidpony.squidmath">Coord</a>[]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.114">lightSources</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="lightBrightnesses">lightBrightnesses</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">int[]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.115">lightBrightnesses</a></span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="decay">decay</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">double</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.117">decay</a></span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
<!--   -->
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(char[][],int,squidpony.squidgrid.Radius)">FOVCache</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.134">FOVCache</a></span>&#8203;(<span class="arguments">char[][]&nbsp;map,
int&nbsp;maxRadius,
<a href="Radius.html" title="enum in squidpony.squidgrid">Radius</a>&nbsp;radiusKind)</span></div>
<div class="block">Create an FOVCache for a given map (as a char[][]), caching all FOV radii from 0 up to and including maxRadius,
 using the given Radius enum to determine FOV shape.  Upon calling cacheAllPerformance() or cacheAll(),
 (collectively, the caching methods), the object this creates will run a medium-quality, fairly permissive FOV
 calculation for every cell on the map using 8 threads, and if cacheAll() was called, will then ensure
 symmetry (if cell A can see cell B, then it will make cell B able to see cell A even if it couldn't in an earlier
 step). At the same time as the first caching method call, this will calculate Line of Sight at maxLOSRadius (here
 it is given a default of 62) for all cells. Walls will always have no cells in their FOV or LOS.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>map</code> - a char[][] as returned by SquidLib's map generators</dd>
<dd><code>maxRadius</code> - the longest radius that will possibly need to be cached for FOV; LOS is separate</dd>
<dd><code>radiusKind</code> - a Radius enum that determines the shape of each FOV area</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(char[][],int,int,squidpony.squidgrid.Radius,int)">FOVCache</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.202">FOVCache</a></span>&#8203;(<span class="arguments">char[][]&nbsp;map,
int&nbsp;maxRadius,
int&nbsp;maxLOSRadius,
<a href="Radius.html" title="enum in squidpony.squidgrid">Radius</a>&nbsp;radiusKind,
int&nbsp;threadCount)</span></div>
<div class="block">Create an FOVCache for a given map (as a char[][]), caching all FOV radii from 0 up to and including maxRadius,
 using the given Radius enum to determine FOV shape.  Upon calling cacheAllPerformance() or cacheAll(),
 (collectively, the caching methods), the object this creates will run a medium-quality, fairly permissive FOV
 calculation for every cell on the map using a number of threads equal to threadCount, and if cacheAll()
 was called, will then ensure symmetry (if cell A can see cell B, then it will make cell B able to see cell A even
 if it couldn't in an earlier step). At the same time as the first caching method call, this will calculate Line
 of Sight at maximum range (given by maxLOSRadius) for all cells. Walls will always have no cells in their FOV or
 in their LOS.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>map</code> - a char[][] as returned by SquidLib's map generators</dd>
<dd><code>maxRadius</code> - the longest radius that will possibly need to be cached for FOV; LOS is separate</dd>
<dd><code>maxLOSRadius</code> - the longest radius that will possibly need to be cached for LOS, must be less than 63</dd>
<dd><code>radiusKind</code> - a Radius enum that determines the shape of each FOV area</dd>
<dd><code>threadCount</code> - how many threads to use during the full-map calculations</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(char[][],int,int,squidpony.squidgrid.Radius,int,java.util.Map)">FOVCache</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.275">FOVCache</a></span>&#8203;(<span class="arguments">char[][]&nbsp;map,
int&nbsp;maxRadius,
int&nbsp;maxLOSRadius,
<a href="Radius.html" title="enum in squidpony.squidgrid">Radius</a>&nbsp;radiusKind,
int&nbsp;threadCount,
<a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="../squidmath/Coord.html" title="class in squidpony.squidmath">Coord</a>,&#8203;<a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Integer.html?is-external=true" title="class or interface in java.lang" class="externalLink">Integer</a>&gt;&nbsp;lights)</span></div>
<div class="block">Create an FOVCache for a given map (as a char[][]), caching all FOV radii from 0 up to and including maxRadius,
 using the given Radius enum to determine FOV shape.  Upon calling cacheAllPerformance() or cacheAll(),
 (collectively, the caching methods), the object this creates will run a medium-quality, fairly permissive FOV
 calculation for every cell on the map using a number of threads equal to threadCount, and if cacheAll()
 was called, will then ensure symmetry (if cell A can see cell B, then it will make cell B able to see cell A even
 if it couldn't in an earlier step). At the same time as the first caching method call, this will calculate Line
 of Sight at maximum range (given by maxLOSRadius) for all cells. Walls will always have no cells in their FOV or
 in their LOS. This constructor also allows you to initialize light sources in the level using the lights
 parameter; any Coord keys should correspond to walkable cells (or they will be ignored), and the values will be
 the range those cells should light up..</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>map</code> - a char[][] as returned by SquidLib's map generators</dd>
<dd><code>maxRadius</code> - the longest radius that will possibly need to be cached for FOV; LOS is separate</dd>
<dd><code>maxLOSRadius</code> - the longest radius that will possibly need to be cached for LOS, must be less than 63</dd>
<dd><code>radiusKind</code> - a Radius enum that determines the shape of each FOV area</dd>
<dd><code>threadCount</code> - how many threads to use during the full-map calculations</dd>
<dd><code>lights</code> - a Map of Coords (which should be walkable) to the radii they should light (not for moving lights)</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="storeCellFOV(int)">storeCellFOV</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.443">storeCellFOV</a></span>&#8203;(<span class="arguments">int&nbsp;index)</span></div>
<div class="block">Packs FOV for a point as a center, and returns it to be stored.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>index</code> - an int that stores the x,y center of FOV as calculated by: x + y * width</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a multi-packed series of progressively wider FOV radii</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="storeCellLOS(int)">storeCellLOS</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.455">storeCellLOS</a></span>&#8203;(<span class="arguments">int&nbsp;index)</span></div>
<div class="block">Packs FOV for a point as a center, and returns it to be stored.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>index</code> - an int that stores the x,y center of FOV as calculated by: x + y * width</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a multi-packed series of progressively wider FOV radii</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="storeCellSymmetry(int)">storeCellSymmetry</a></h3>
<div class="memberSignature"><span class="modifiers">protected</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.466">storeCellSymmetry</a></span>&#8203;(<span class="arguments">int&nbsp;index)</span></div>
<div class="block">Uses previously cached FOV and makes it symmetrical. Also handles distant lights</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>index</code> - an int that stores the x,y center of FOV as calculated by: x + y * width</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a multi-packed series of progressively wider FOV radii</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="calculatePackedLOS(int,int)">calculatePackedLOS</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">short[]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.541">calculatePackedLOS</a></span>&#8203;(<span class="arguments">int&nbsp;viewerX,
int&nbsp;viewerY)</span></div>
<div class="block">Packs FOV for the given viewer's X and Y as a center, and returns the packed data to be stored.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>viewerX</code> - an int less than 256 and less than width</dd>
<dd><code>viewerY</code> - an int less than 256 and less than height</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a packed FOV map for radius equal to maxLOSRadius</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="calculatePackedSlopeShadowFOV(int,int)">calculatePackedSlopeShadowFOV</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">short[][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.558">calculatePackedSlopeShadowFOV</a></span>&#8203;(<span class="arguments">int&nbsp;viewerX,
int&nbsp;viewerY)</span></div>
<div class="block">Packs FOV for the given viewer's X and Y as a center, and returns the packed data to be stored.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>viewerX</code> - an int less than 256 and less than width</dd>
<dd><code>viewerY</code> - an int less than 256 and less than height</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a multi-packed series of progressively wider FOV radii</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="calculatePackedWaveFOV(int,int)">calculatePackedWaveFOV</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">short[][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.573">calculatePackedWaveFOV</a></span>&#8203;(<span class="arguments">int&nbsp;viewerX,
int&nbsp;viewerY)</span></div>
<div class="block">Packs FOV for the given viewer's X and Y as a center, and returns the packed data to be stored.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>viewerX</code> - an int less than 256 and less than width</dd>
<dd><code>viewerY</code> - an int less than 256 and less than height</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a multi-packed series of progressively wider FOV radii</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getCacheEntry(int,int)">getCacheEntry</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">short[][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.581">getCacheEntry</a></span>&#8203;(<span class="arguments">int&nbsp;x,
int&nbsp;y)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getCacheEntry(int,int,int)">getCacheEntry</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">short[]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.585">getCacheEntry</a></span>&#8203;(<span class="arguments">int&nbsp;x,
int&nbsp;y,
int&nbsp;radius)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getLOSEntry(int,int)">getLOSEntry</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">short[]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.590">getLOSEntry</a></span>&#8203;(<span class="arguments">int&nbsp;x,
int&nbsp;y)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="queryCache(int,int,int,int,int)">queryCache</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.595">queryCache</a></span>&#8203;(<span class="arguments">int&nbsp;visionRange,
int&nbsp;viewerX,
int&nbsp;viewerY,
int&nbsp;targetX,
int&nbsp;targetY)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="isCellVisible(int,int,int,int,int)">isCellVisible</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.599">isCellVisible</a></span>&#8203;(<span class="arguments">int&nbsp;visionRange,
int&nbsp;viewerX,
int&nbsp;viewerY,
int&nbsp;targetX,
int&nbsp;targetY)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="queryLOS(int,int,int,int)">queryLOS</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.604">queryLOS</a></span>&#8203;(<span class="arguments">int&nbsp;viewerX,
int&nbsp;viewerY,
int&nbsp;targetX,
int&nbsp;targetY)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="arrayMemoryUsage(int,long)">arrayMemoryUsage</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.609">arrayMemoryUsage</a></span>&#8203;(<span class="arguments">int&nbsp;length,
long&nbsp;bytesPerItem)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="arrayMemoryUsage2D(int,int,long)">arrayMemoryUsage2D</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.613">arrayMemoryUsage2D</a></span>&#8203;(<span class="arguments">int&nbsp;xSize,
int&nbsp;ySize,
long&nbsp;bytesPerItem)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="arrayMemoryUsageJagged(short[][])">arrayMemoryUsageJagged</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.618">arrayMemoryUsageJagged</a></span>&#8203;(<span class="arguments">short[][]&nbsp;arr)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="approximateMemoryUsage()">approximateMemoryUsage</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.626">approximateMemoryUsage</a></span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="waveFOV(int,int)">waveFOV</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">byte[][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.899">waveFOV</a></span>&#8203;(<span class="arguments">int&nbsp;viewerX,
int&nbsp;viewerY)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="slopeShadowFOV(int,int)">slopeShadowFOV</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">byte[][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1066">slopeShadowFOV</a></span>&#8203;(<span class="arguments">int&nbsp;viewerX,
int&nbsp;viewerY)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="improveQuality(int,int)">improveQuality</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">short[][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1132">improveQuality</a></span>&#8203;(<span class="arguments">int&nbsp;viewerX,
int&nbsp;viewerY)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="cacheAll()">cacheAll</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1269">cacheAll</a></span>()</div>
<div class="block">Runs FOV calculations on another thread, without interrupting this one, then performs additional quality tweaks
 and adds any distant lights, if there were any in the constructor. Before using the cache, you should call
 awaitCache() to ensure this method has finished on its own thread, but be aware that this will cause
 the thread that calls awaitCache() to essentially freeze until FOV calculations are over.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="awaitCache()">awaitCache</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1293">awaitCache</a></span>()</div>
<div class="block">If FOV calculations from cacheAll() are being done on another thread, calling this method will make
 the current thread wait for the FOV calculations' thread to finish, "freezing" the current thread until it does.
 This ensures the cache will be complete with the additional quality improvements such as distant lights after
 this method returns true, and if this method returns false, then something has gone wrong.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if cacheAll() has successfully completed, false otherwise.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="refreshCache(char[][])">refreshCache</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1312">refreshCache</a></span>&#8203;(<span class="arguments">char[][]&nbsp;newMap)</span></div>
<div class="block">Runs FOV calculations for any cells that were changed as a result of newMap being different from the map passed
 to the FOVCache constructor. It runs these on another thread, without interrupting this one. Before using the
 cache, you should call awaitRefresh() to ensure this method has finished on its own thread, but be aware that
 this will cause the thread that calls awaitRefresh() to essentially freeze until FOV calculations are over.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="awaitRefresh(char[][])">awaitRefresh</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1325">awaitRefresh</a></span>&#8203;(<span class="arguments">char[][]&nbsp;newMap)</span></div>
<div class="block">If FOV calculations from refreshCache() are being done on another thread, calling this method will make
 the current thread wait for the FOV calculations' thread to finish, "freezing" the current thread until it does.
 This ensures the cache will be complete with the updates from things like opening a door after
 this method returns true, and if this method returns false, then something has gone wrong.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if refreshCache() has successfully completed, false otherwise.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="calculateFOV(double[][],int,int)">calculateFOV</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">double[][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1402">calculateFOV</a></span>&#8203;(<span class="arguments">double[][]&nbsp;resistanceMap,
int&nbsp;startx,
int&nbsp;starty)</span></div>
<div class="block">Calculates the Field Of View for the provided map from the given x, y
 coordinates. Returns a light map where the values are either 1.0 or 0.0.
 Takes a double[][] resistance map that will be disregarded.
 <br>
 The starting point for the calculation is considered to be at the center
 of the origin cell. Radius determinations are based on the radiusKind given
 in construction. The light will be treated as having radius 62, regardless
 of the maxRadius passed to the constructor; this should in most cases be
 suitable when limitless light is desired.
 If the cache has not been fully constructed, this will compute a new FOV
 map using Shadow FOV instead of using the cache, and the result will not
 be cached.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="FOV.html#calculateFOV(double%5B%5D%5B%5D,int,int)">calculateFOV</a></code>&nbsp;in class&nbsp;<code><a href="FOV.html" title="class in squidpony.squidgrid">FOV</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resistanceMap</code> - the grid of cells to calculate on</dd>
<dd><code>startx</code> - the horizontal component of the starting location</dd>
<dd><code>starty</code> - the vertical component of the starting location</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the computed light grid</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="calculateFOV(double[][],int,int,double)">calculateFOV</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">double[][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1542">calculateFOV</a></span>&#8203;(<span class="arguments">double[][]&nbsp;resistanceMap,
int&nbsp;startx,
int&nbsp;starty,
double&nbsp;radius)</span></div>
<div class="block">Calculates the Field Of View for the provided map from the given x, y
 coordinates. Returns a light map where the values range from 1.0 (center
 of the FOV) to 0.0 (not seen), with values between those two extremes
 for the rest of the seen area.
 Takes a double radius to extend out to (rounded to the nearest int), and
 a double[][] resistance map that will be disregarded.
 <br>
 The starting point for the calculation is considered to be at the center
 of the origin cell. Radius determinations are based on the radiusKind given
 in construction. The light will be treated as having the given radius, but
 if that is higher than the maximum possible radius stored by this FOVCache,
 it will compute a new FOV map using Ripple FOV instead of using the cache.
 If the cache has not been fully constructed, this will compute a new FOV
 map using Ripple FOV instead of using the cache, and the result will not
 be cached.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="FOV.html#calculateFOV(double%5B%5D%5B%5D,int,int,double)">calculateFOV</a></code>&nbsp;in class&nbsp;<code><a href="FOV.html" title="class in squidpony.squidgrid">FOV</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resistanceMap</code> - the grid of cells to calculate on</dd>
<dd><code>startx</code> - the horizontal component of the starting location</dd>
<dd><code>starty</code> - the vertical component of the starting location</dd>
<dd><code>radius</code> - the distance the light will extend to</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the computed light grid</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="calculateFOV(double[][],int,int,double,squidpony.squidgrid.Radius)">calculateFOV</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">double[][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1579">calculateFOV</a></span>&#8203;(<span class="arguments">double[][]&nbsp;resistanceMap,
int&nbsp;startX,
int&nbsp;startY,
double&nbsp;radius,
<a href="Radius.html" title="enum in squidpony.squidgrid">Radius</a>&nbsp;radiusTechnique)</span></div>
<div class="block">Calculates the Field Of View for the provided map from the given x, y
 coordinates. Returns a light map where the values range from 1.0 (center
 of the FOV) to 0.0 (not seen), with values between those two extremes
 for the rest of the seen area.
 Takes a double radius to extend out to (rounded to the nearest int), a
 Radius enum that should match the Radius this FOVCache was constructed
 with, and a double[][] resistance map that will be disregarded.
 <br>
 The starting point for the calculation is considered to be at the center
 of the origin cell. Radius determinations are based on the radiusTechnique
 passed to this method, but will only use the cache if the Radius given is
 the same kind as the one given in construction. The light will be treated
 as having the given radius, but if that is higher than the maximum possible
 radius stored by this FOVCache, it will compute a new FOV map using Ripple
 FOV instead of using the cache.
 If the cache has not been fully constructed, this will compute a new FOV
 map using Ripple FOV instead of using the cache, and the result will not
 be cached.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="FOV.html#calculateFOV(double%5B%5D%5B%5D,int,int,double,squidpony.squidgrid.Radius)">calculateFOV</a></code>&nbsp;in class&nbsp;<code><a href="FOV.html" title="class in squidpony.squidgrid">FOV</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resistanceMap</code> - the grid of cells to calculate on</dd>
<dd><code>startX</code> - the horizontal component of the starting location</dd>
<dd><code>startY</code> - the vertical component of the starting location</dd>
<dd><code>radius</code> - the distance the light will extend to</dd>
<dd><code>radiusTechnique</code> - provides a means to calculate the radius as desired</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the computed light grid</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="calculateFOV(double[][],int,int,double,squidpony.squidgrid.Radius,double,double)">calculateFOV</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">double[][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1623">calculateFOV</a></span>&#8203;(<span class="arguments">double[][]&nbsp;resistanceMap,
int&nbsp;startX,
int&nbsp;startY,
double&nbsp;radius,
<a href="Radius.html" title="enum in squidpony.squidgrid">Radius</a>&nbsp;radiusTechnique,
double&nbsp;angle,
double&nbsp;span)</span></div>
<div class="block">Calculates the conical Field Of View for the provided map from the given
 x, y coordinates. Returns a light map where the values range from 1.0
 (center of the FOV) to 0.0 (not seen), with values between those two
 extremes for the rest of the seen area.
 Takes a double radius to extend out to (rounded to the nearest int), a
 Radius enum that should match the Radius this FOVCache was constructed
 with, a double[][] resistance map that will be disregarded, an angle to
 center the conical FOV on (in degrees), and the total span in degrees
 for the FOV to cover.
 <br>
 The starting point for the calculation is considered to be at the center
 of the origin cell. Radius determinations are based on the radiusTechnique
 passed to this method, but will only use the cache if the Radius given is
 the same kind as the one given in construction. The light will be treated
 as having the given radius, but if that is higher than the maximum possible
 radius stored by this FOVCache, it will compute a new FOV map using Ripple
 FOV instead of using the cache. A conical section of FOV is lit by this
 method if span is greater than 0.

 If the cache has not been fully constructed, this will compute a new FOV
 map using Ripple FOV instead of using the cache, and the result will not
 be cached.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="FOV.html#calculateFOV(double%5B%5D%5B%5D,int,int,double,squidpony.squidgrid.Radius,double,double)">calculateFOV</a></code>&nbsp;in class&nbsp;<code><a href="FOV.html" title="class in squidpony.squidgrid">FOV</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resistanceMap</code> - the grid of cells to calculate on</dd>
<dd><code>startX</code> - the horizontal component of the starting location</dd>
<dd><code>startY</code> - the vertical component of the starting location</dd>
<dd><code>radius</code> - the distance the light will extend to</dd>
<dd><code>radiusTechnique</code> - provides a means to calculate the radius as desired</dd>
<dd><code>angle</code> - the angle in degrees that will be the center of the FOV cone, 0 points right</dd>
<dd><code>span</code> - the angle in degrees that measures the full arc contained in the FOV cone</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the computed light grid</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="calculateLOS(int,int,int,int)">calculateLOS</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../squidmath/Coord.html" title="class in squidpony.squidmath">Coord</a>[]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1647">calculateLOS</a></span>&#8203;(<span class="arguments">int&nbsp;startX,
int&nbsp;startY,
int&nbsp;endX,
int&nbsp;endY)</span></div>
<div class="block">Calculates an array of Coord positions that can be seen along the line from the given start point and end point.
 Does not order the array. Uses the pre-computed LOS cache to determine obstacles, and tends to draw a
 thicker line than Bresenham lines will. This uses the same radiusKind the FOVCache was created with, but the line
 this draws doesn't necessarily travel along valid directions for creatures (in particular, Radius.DIAMOND should
 only allow orthogonal movement, but if you request a 45-degree line, the LOS will have Coords on a perfect
 diagonal, though they won't travel through walls that occupy a thin perpendicular diagonal).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>startX</code> - the x position of the starting point; must be within bounds of the map</dd>
<dd><code>startY</code> - the y position of the starting point; must be within bounds of the map</dd>
<dd><code>endX</code> - the x position of the endpoint; does not need to be within bounds (will stop LOS at the edge)</dd>
<dd><code>endY</code> - the y position of the endpoint; does not need to be within bounds (will stop LOS at the edge)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a Coord[], unordered, that can be seen along the line of sight; limited to maxLOSRadius, default 62</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="sortedLOS(int,int,int,int)">sortedLOS</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../squidmath/Coord.html" title="class in squidpony.squidmath">Coord</a>[]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1706">sortedLOS</a></span>&#8203;(<span class="arguments">int&nbsp;startX,
int&nbsp;startY,
int&nbsp;endX,
int&nbsp;endY)</span></div>
<div class="block">Calculates an array of Coord positions that can be seen along the line from the given start point and end point.
 Sorts the array, starting from the closest Coord to start and ending close to end. Uses the pre-computed LOS
 cache to determine obstacles, and tends to draw a thicker line than Bresenham lines will. This uses the same
 radiusKind the FOVCache was created with, but the line this draws doesn't necessarily travel along valid
 directions for creatures (in particular, Radius.DIAMOND should only allow orthogonal movement, but if you request
 a 45-degree line, the LOS will have Coords on a perfect diagonal, though they won't travel through walls that
 occupy a thin perpendicular diagonal).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>startX</code> - the x position of the starting point; must be within bounds of the map</dd>
<dd><code>startY</code> - the y position of the starting point; must be within bounds of the map</dd>
<dd><code>endX</code> - the x position of the endpoint; does not need to be within bounds (will stop LOS at the edge)</dd>
<dd><code>endY</code> - the y position of the endpoint; does not need to be within bounds (will stop LOS at the edge)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a Coord[], sorted, that can be seen along the line of sight; limited to max LOS range, 62</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="pathFOVPacked(java.util.List,int)">pathFOVPacked</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">short[][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1731">pathFOVPacked</a></span>&#8203;(<span class="arguments"><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="../squidmath/Coord.html" title="class in squidpony.squidmath">Coord</a>&gt;&nbsp;path,
int&nbsp;fovRange)</span></div>
<div class="block">Given a path as a List of Coords (such as one produced by DijkstraMap.getPath()), this method will look up the
 FOV for the given fovRange at each Coord, and returns an array of packed FOV maps where each map is the union
 of the FOV centered on a Coord in path with all FOVs centered on previous Coords in path. The purpose of this is
 mainly to have an efficient way to show the progressively expanding seen area of a character who moves multiple
 tiles. It may be desirable to add the entire path's cumulative FOV (stored in the last element of the returned
 short[][]) to the history of what a character has seen, removing the path's FOV from the currently visible cells
 either after the character has finished their action, or even immediately after moving if, for instance, the
 movement was part of a rapid leap that wouldn't let the character spot details while moving (but the general
 layout provided by the seen-cell history could suffice). This method never unpacks any packed data.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>path</code> - a List of Coords that will be added, in order, to multiple packed FOVs for the path so far</dd>
<dd><code>fovRange</code> - the radius the creature or thing taking the path can see (or possibly light up).</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a packed short[][], each short[] encoding the FOV around an additional Coord merged with those before</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="pathFOV(java.util.List,int)">pathFOV</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">double[][][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1772">pathFOV</a></span>&#8203;(<span class="arguments"><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="../squidmath/Coord.html" title="class in squidpony.squidmath">Coord</a>&gt;&nbsp;path,
int&nbsp;fovRange)</span></div>
<div class="block">Given a path as a List of Coords (such as one produced by DijkstraMap.getPath()), this method will look up the
 FOV for the given fovRange at each Coord, and returns an array of full FOV maps where each map is the union
 of the FOV centered on a Coord in path with all FOVs centered on previous Coords in path. The purpose of this is
 mainly to have a way to show the progressively expanding seen area of a character who moves multiple
 tiles. It may be desirable to add the entire path's cumulative FOV (stored in the last element of the returned
 double[][][]) to the history of what a character has seen, removing the path's FOV from the currently visible
 cells either after the character has finished their action, or even immediately after moving if, for instance,
 the movement was part of a rapid leap that wouldn't let the character spot details while moving (but the general
 layout provided by the seen-cell history could suffice). This method computes the union of the FOV without
 unpacking, but then unpacks each step along the path into a double[][] of 1.0 and 0.0 values.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>path</code> - a List of Coords that will be added, in order, to multiple FOVs for the path so far</dd>
<dd><code>fovRange</code> - the radius the creature or thing taking the path can see (or possibly light up).</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a packed double[][][]; each double[][] is the FOV around an additional Coord merged with those before</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="teamFOVPacked(java.util.Map)">teamFOVPacked</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">short[]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1792">teamFOVPacked</a></span>&#8203;(<span class="arguments"><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="../squidmath/Coord.html" title="class in squidpony.squidmath">Coord</a>,&#8203;<a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Integer.html?is-external=true" title="class or interface in java.lang" class="externalLink">Integer</a>&gt;&nbsp;team)</span></div>
<div class="block">In games that have multiple characters who should share one FOV map, this method should provide optimal
 performance when collecting several cached FOV maps into one packed map. It takes a Map of Coord keys to Integer
 values, and since it does not modify its parameter, nor does it need a particular iteration order, it doesn't
 perform a defensive copy of the team parameter. Each Coord key should correspond to the position of a character,
 and each Integer value should be the FOV range of that character. This returns a short[] as a packed FOV map for
 all characters in team as a collective.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>team</code> - a Map of Coord keys for characters' positions to Integer values for the FOV range of each character</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a packed FOV map that can be used with other packed data using CoordPacker.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="teamFOV(java.util.Map)">teamFOV</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">double[][]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1830">teamFOV</a></span>&#8203;(<span class="arguments"><a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="../squidmath/Coord.html" title="class in squidpony.squidmath">Coord</a>,&#8203;<a href="https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/lang/Integer.html?is-external=true" title="class or interface in java.lang" class="externalLink">Integer</a>&gt;&nbsp;team)</span></div>
<div class="block">In games that have multiple characters who should share one FOV map, this method should provide optimal
 performance when collecting several cached FOV maps into one full map. It takes a Map of Coord keys to Integer
 values, and since it does not modify its parameter, nor does it need a particular iteration order, it doesn't
 perform a defensive copy of the team parameter. Each Coord key should correspond to the position of a character,
 and each Integer value should be the FOV range of that character. This returns a double[][] as a full FOV map,
 with values of either 1.0 or 0.0, for all characters in team as a collective.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>team</code> - a Map of Coord keys for characters' positions to Integer values for the FOV range of each character</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a double[][] FOV map with 1.0 and 0.0 as values, combining all characters' FOV maps.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="removeWalls(short[])">removeWalls</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">short[]</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1842">removeWalls</a></span>&#8203;(<span class="arguments">short[]&nbsp;packed)</span></div>
<div class="block">When you have some packed on/off data and want to make sure it does not include walls, you can use this. It does
 not need to unpack the given packed short[] to get the subset of it without walls. Of course, this needs the
 FOVCache to be</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>packed</code> - a short[] produced by some CoordPacker method or obtained by getLOSEntry() or getCacheEntry().</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>another packed array containing only the non-wall "on" cells in packed</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getMaxRadius()">getMaxRadius</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1847">getMaxRadius</a></span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getRadiusKind()">getRadiusKind</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="Radius.html" title="enum in squidpony.squidgrid">Radius</a></span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1851">getRadiusKind</a></span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getWidth()">getWidth</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1855">getWidth</a></span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getHeight()">getHeight</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.1859">getHeight</a></span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="destroy()">destroy</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName"><a href="../../src-html/squidpony/squidgrid/FOVCache.html#line.2164">destroy</a></span>()</div>
<div class="block">Shuts down any threads that may prevent the game from closing properly.
 It is recommended you call this at the end of the program to avoid threads lingering too long.
 You don't have to do anything special after you call this, other than not using this FOVCache any more.</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FOVCache.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2012&#x2013;2020. All rights reserved.</small></p>
</footer>
</body>
</html>
